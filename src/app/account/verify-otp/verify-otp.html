@let emailData = email();
<section class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-sm">
    <h2 class="mt-10 text-center text-2xl/9 font-bold tracking-tight">
      {{ 'verifyOtp.body.title' | translate }}
    </h2>
    <p class="mt-2 text-center text-sm/6">
      {{ 'verifyOtp.body.description' | translate: { emailAddress: emailData } }}
    </p>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
    @if (otpForm.errors && otpForm.errors['error-message']) {
      <div>
        {{ otpForm.errors['error-message'] }}
      </div>
    }

    <form [formGroup]="otpForm" (ngSubmit)="onSubmit($event)" novalidate class="space-y-6">
      <div class="mt-2 flex justify-between">
        <input
          type="text"
          id="digit0"
          name="digit0"
          formControlName="digit0"
          maxlength="1"
          (input)="onInput($event, 0)"
          (keydown)="onKeyDown($event, 0)"
          (paste)="onPaste($event)"
          class="w-[55px] rounded-md bg-white px-3 py-1.5 text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
        <input
          type="text"
          id="digit1"
          name="digit1"
          formControlName="digit1"
          maxlength="1"
          (input)="onInput($event, 1)"
          (keydown)="onKeyDown($event, 1)"
          class="w-[55px] rounded-md bg-white text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
        <input
          type="text"
          id="digit2"
          name="digit2"
          formControlName="digit2"
          maxlength="1"
          (input)="onInput($event, 2)"
          (keydown)="onKeyDown($event, 2)"
          class="w-[55px] rounded-md bg-white text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
        <input
          type="text"
          id="digit3"
          name="digit3"
          formControlName="digit3"
          maxlength="1"
          (input)="onInput($event, 3)"
          (keydown)="onKeyDown($event, 3)"
          class="w-[55px] rounded-md bg-white text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
        <input
          type="text"
          id="digit4"
          name="digit4"
          formControlName="digit4"
          maxlength="1"
          (input)="onInput($event, 4)"
          (keydown)="onKeyDown($event, 4)"
          class="w-[55px] rounded-md bg-white text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
        <input
          type="text"
          id="digit5"
          name="digit5"
          formControlName="digit5"
          maxlength="1"
          (input)="onInput($event, 5)"
          (keydown)="onKeyDown($event, 5)"
          class="w-[55px] rounded-md bg-white text-center text-base outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
        />
      </div>
      <div>
        <button
          type="submit"
          [disabled]="otpForm.invalid"
          class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
        >
          {{ 'verifyOtp.form.verify' | translate }}
        </button>
      </div>
    </form>

    <p class="mt-10 text-center text-sm/6">
      <button
        (click)="resendOtp()"
        [disabled]="isRunning()"
        class="text-blue-600 no-underline hover:underline hover:text-blue-800 transition-colors duration-200"
      >
        {{
          isRunning()
            ? ('verifyOtp.form.resendIn' | translate: { remainingTime: formattedTime() })
            : ('verifyOtp.form.resend' | translate)
        }}
      </button>
    </p>
  </div>
</section>
