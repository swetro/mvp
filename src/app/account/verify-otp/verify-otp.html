@let emailData = email();
<section class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
  <h2 class="text-center">
    {{ 'verifyOtp.body.title' | translate }}
  </h2>
  <p class="mt-2 text-center text-sm/6">
    {{ 'verifyOtp.body.description' | translate: { emailAddress: emailData } }}
  </p>

  <div class="mt-10 mb-20 sm:mx-auto sm:w-full sm:max-w-sm">
    @if (otpForm.errors && otpForm.errors['error-message']) {
      <div class="form-error-message font-normal">
        {{ otpForm.errors['error-message'] }}
      </div>
    }

    <form [formGroup]="otpForm" (ngSubmit)="onSubmit($event)" novalidate class="space-y-6">
      <div class="flex justify-between gap-2">
        <input
          type="text"
          id="digit0"
          name="digit0"
          formControlName="digit0"
          maxlength="1"
          (input)="onInput($event, 0)"
          (keydown)="onKeyDown($event, 0)"
          (paste)="onPaste($event)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
        <input
          type="text"
          id="digit1"
          name="digit1"
          formControlName="digit1"
          maxlength="1"
          (input)="onInput($event, 1)"
          (keydown)="onKeyDown($event, 1)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
        <input
          type="text"
          id="digit2"
          name="digit2"
          formControlName="digit2"
          maxlength="1"
          (input)="onInput($event, 2)"
          (keydown)="onKeyDown($event, 2)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
        <input
          type="text"
          id="digit3"
          name="digit3"
          formControlName="digit3"
          maxlength="1"
          (input)="onInput($event, 3)"
          (keydown)="onKeyDown($event, 3)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
        <input
          type="text"
          id="digit4"
          name="digit4"
          formControlName="digit4"
          maxlength="1"
          (input)="onInput($event, 4)"
          (keydown)="onKeyDown($event, 4)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
        <input
          type="text"
          id="digit5"
          name="digit5"
          formControlName="digit5"
          maxlength="1"
          (input)="onInput($event, 5)"
          (keydown)="onKeyDown($event, 5)"
          class="form-input text-center"
          [class.form-input-error]="otpForm.errors && otpForm.errors['error-message']"
        />
      </div>
      <div>
        <button type="submit" [disabled]="otpForm.invalid" class="btn-primary w-full">
          {{ 'verifyOtp.form.verify' | translate }}
        </button>
      </div>
    </form>

    <p class="mt-10 text-center text-sm">
      <button
        (click)="resendOtp()"
        [disabled]="isRunning()"
        class="text-blue-600 no-underline hover:underline hover:text-blue-700 cursor-pointer"
      >
        {{
          isRunning()
            ? ('verifyOtp.form.resendIn' | translate: { remainingTime: formattedTime() })
            : ('verifyOtp.form.resend' | translate)
        }}
      </button>
    </p>
  </div>
</section>
